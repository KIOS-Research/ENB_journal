# Distributed Diagnosis of Sensor and Actuator Faults in Air Handling Units in Multi-Zone Buildings: A Model-Based Approach
Matlab code and EnergyPlus files used is the Energy and Buildings journal paper. 

# Paper Abstract
The presence of sensing and actuating equipment faults in Heating, Ventilation and Air-Conditioning (HVAC) systems may result in unsatisfactory indoor thermal conditions and significant wasted energy in the building sector. The design of fault diagnosis algorithms for multi-zone buildings is a highly challenging procedure due to the overall complexity of the system. This paper proposes a distributed model-based fault diagnosis algorithm for detecting, isolating and identifying faults that can affect the actuating devices of Air Handling Units (AHUs) and the sensor devices. Based on modeling the temperature dynamics of each local AHU and its underlying zone with respect to its neighboring zones, a local fault diagnosis agent that collects local control signals and local and neighboring sensor measurements is designed. Each local diagnosis agent is designed to estimate on-line the states of each AHU. For each estimation, a residual signal is derived that corresponds to the difference between the measured and estimated value at each time step. Considering healthy conditions, the residual is bounded by its corresponding adaptive threshold that is calculated considering the effects of modeling uncertainties. Each corresponding pair of residual and adaptive threshold forms an analytical redundancy relation which indicates the possible presence of one or more faults. Exploiting the dependency of each actuator and sensor fault with each Analytical Redundancy Relation (ARR), a decision logic is designed, that can reveal under certain conditions the location and type of the fault during the operation of the system. The proposed algorithm is evaluated using a simulation example of a primary school building with 25 zones

# Code Documentation

To reproduce the code the following softwares need to be install:

1. Matlab 2014b https://www.mathworks.com/downloads/web_downloads?s_iid=hp_ff_t_downloads
2. EnergyPlus 9.6.0 https://energyplus.net/downloads
3. BCVTB 1.6.0 https://simulationresearch.lbl.gov/bcvtb/Download

To run the simulation follow the steps below:

1. Run the BCVTB.jar software from the directory: C:\BCVTB\bin\.
2. Open the xml file named "system_corner1pod1_diagnosis.xml" by clicking "File" and then "Open File".
3. Press the start button.

Notes:

- The simulation results will be stored in a new folder named "Results_fz10_sensor_Scenario1"
- EnergyPlus and Matlab threats will generated automatically. 
- The matrices and vectors A, B, G are generated by running the Matlab code "SystemParameters_Observer.m". The Matlab code "readepJSONout.m" needs to run prior to retrieve the parameters of the building, such as the volume of each zone, number of zones, heat transfer coefficients, HVAC parameters, etc.
